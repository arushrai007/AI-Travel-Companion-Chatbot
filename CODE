import streamlit as st
import cohere
st.set_page_config(page_title="ğŸŒ AI Travel Companion by Arush", page_icon="ğŸ§³")
st.title("ğŸ§³ AI Travel Companion Chatbot")
st.markdown("Ask travel questions: destinations, budget trips, safety, packing, etc.")

api_key = st.text_input("UZCA72sepSuswT5iXjA3oekkTu1jlmKAOr0I6PH6", type="password")

if api_key:
    co = cohere.Client(api_key)

    if "messages" not in st.session_state:
        st.session_state.messages = []


    user_input = st.chat_input("Ask me your travel question!")

    if user_input:
        st.session_state.messages.append({"role": "user", "text": user_input})
        with st.chat_message("user"):
            st.markdown(user_input)

       
        prompt = "You are a friendly and detailed AI travel assistant. Provide complete and helpful travel guidance.\n\n"
        for msg in st.session_state.messages:
            role = "User" if msg["role"] == "user" else "Assistant"
            prompt += f"{role}: {msg['text']}\n"
        prompt += "Assistant:"


        with st.spinner("Generating full response..."):
            try:
                response = co.generate(
                    model="command-r-plus",
                    prompt=prompt,
                    max_tokens=1000,           
                    temperature=0.7,
                    stop_sequences=["User:"],
                    truncate="END"
                )
                reply = response.generations[0].text.strip()
            except Exception as e:
                reply = f"âŒ Error: {e}"

        
        st.session_state.messages.append({"role": "assistant", "text": reply})
        with st.chat_message("assistant"):
            st.markdown(reply)

    for msg in st.session_state.messages:
        with st.chat_message("user" if msg["role"] == "user" else "assistant"):
            st.markdown(msg["text"])
